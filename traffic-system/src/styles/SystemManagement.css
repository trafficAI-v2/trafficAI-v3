/* src/styles/SystemManagement.css */

/* --- 1. 頁面容器與標題 --- */
/* 我們可以沿用許多在 dashboard.css 或 violationlog.css 中已經定義好的樣式 */
/* 這裡假設你有一個通用的 .page-container 和 .page-header */
/* 如果沒有，可以從 dashboard.css 複製過來 */
.page-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }
  
/* ----- 頁面標題 ----- */
.page-header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }
  .page-header-container h1 {
    margin: 0;
    font-size: 28px;
    font-weight: 600;
    color: #1f2937;
  }
  .page-header-container p {
    margin: 4px 0 0;
    color: #6b7280;
    font-size: 16px;
  }
  
  /* --- 2. 系統管理頁面的主要內容容器 --- */
  /* 這是一個白色的卡片，用來包裹所有的設定區塊 */
  .system-management-content {
    background-color: #ffffff;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.07);
    display: flex;
    flex-direction: column;
    gap: 24px; /* 每個管理區塊之間的間距 */
  }
  
  /* --- 3. 區塊標題與工具列 --- */
  /* 用於「使用者管理」這樣的大標題，以及旁邊的「新增使用者」按鈕 */
  .management-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .management-section-header h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: #1f2937;
  }
  
  /* --- 4. 「新增使用者」按鈕樣式 --- */
  .add-user-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background-color: #1f2937; /* 深色背景 */
    color: #ffffff;
    padding: 10px 16px;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  
  .add-user-button:hover {
    background-color: #374151; /* 滑鼠懸停時變深一點 */
  }
  
  .add-user-button svg {
    font-size: 18px;
  }
  
  
  /* --- 5. 使用者列表的表格樣式 (預留) --- */
  /* 這些樣式會在我們下一步建立使用者列表時用到 */
  .user-table-container {
    width: 100%;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden; /* 確保圓角效果 */
  }
  
  .user-table {
    width: 100%;
    border-collapse: collapse; /* 讓表格邊框合併 */
  }
  
  .user-table th,
  .user-table td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .user-table th {
    background-color: #f9fafb;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #6b7280;
  }
  
  .user-table td {
    font-size: 14px;
    color: #374151;
  }
  
  /* 角色標籤的樣式 */
  .role-tag {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    text-align: center;
    white-space: nowrap;
  }
  
  .role-tag.admin {
    background-color: #fee2e2; /* 淡紅色 */
    color: #991b1b;
  }
  
  .role-tag.operator {
    background-color: #e0e7ff; /* 淡藍色 */
    color: #4338ca;
  }

/* --- 6. 新增使用者表單樣式 (在 Modal 內部) --- */
.add-user-form {
    display: flex;
    flex-direction: column;
    gap: 20px; /* 每個表單群組之間的間距 */
  }
  
  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .form-group label {
    font-size: 14px;
    font-weight: 500;
    color: #374151;
  }
  
  .form-group input,
  .form-group select {
    width: 100%;
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-size: 14px;
    box-sizing: border-box;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  
  .form-group input:focus,
  .form-group select:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
  }
  
  .form-actions {
    display: flex;
    justify-content: flex-end; /* 讓按鈕靠右對齊 */
    gap: 12px;
    padding-top: 16px;
    border-top: 1px solid #e5e7eb;
    margin-top: 8px;
  }
  
  /* 沿用 base.css 或自訂通用按鈕樣式 */
  .form-actions button {
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 500;
    border-radius: 8px;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .form-actions button[type="button"] {
    background-color: #ffffff;
    border-color: #d1d5db;
    color: #374151;
  }
  .form-actions button[type="button"]:hover {
    background-color: #f9fafb;
  }
  
  .form-actions button[type="submit"] {
    background-color: #1f2937;
    color: #ffffff;
  }
  .form-actions button[type="submit"]:hover {
    background-color: #374151;
  }
  .form-actions button:disabled {
      background-color: #e5e7eb;
      cursor: not-allowed;
  }

/* === 系統管理功能卡片 === */
.management-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
}

.management-card {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 24px;
  transition: box-shadow 0.2s, transform 0.2s;
  cursor: pointer;
}

.management-card:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

.management-card h3 {
  font-size: 18px;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 8px 0;
}

.management-card p {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 16px 0;
  line-height: 1.5;
}

.card-stats {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}

.card-stats span {
  font-size: 12px;
  color: #374151;
  background-color: #f3f4f6;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 500;
}

/* === 表格標題區域更新 === */
.management-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e5e7eb;
}

.header-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.action-btn.primary {
  background-color: #3b82f6;
  color: #ffffff;
  border-color: #3b82f6;
}

.action-btn.primary:hover {
  background-color: #2563eb;
  border-color: #2563eb;
}

.action-btn.secondary {
  background-color: #ffffff;
  color: #374151;
  border-color: #d1d5db;
}

.action-btn.secondary:hover {
  background-color: #f9fafb;
  border-color: #9ca3af;
}

/* === 上次登入時間樣式 === */
.last-login-cell {
  font-size: 13px;
  min-width: 120px;
}

.login-time {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.login-time .date {
  font-weight: 500;
  color: #374151;
}

.login-time .time {
  font-size: 12px;
  color: #6b7280;
}

.never-login {
  color: #9ca3af;
  font-style: italic;
}

/* === 操作按鈕改進 === */
.action-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 6px;
  transition: background-color 0.2s;
  margin: 0 2px;
}

.action-button:hover {
  background-color: #f3f4f6;
}

.action-button.edit-button {
  color: #3b82f6;
}

.action-button.edit-button:hover {
  background-color: #eff6ff;
}

.action-button.delete-button {
  color: #ef4444;
}

.action-button.delete-button:hover {
  background-color: #fef2f2;
}

/* --- 【新增】頂部功能卡片網格樣式 --- */
.management-cards {
  display: grid;
  /* 在大螢幕上顯示 3 欄，小螢幕上自動變為 1 欄 */
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
}

.management-card {
  background-color: #ffffff;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.07);
  display: flex;
  flex-direction: column;
}

.management-card h3 {
  font-size: 18px;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 8px;
}

.management-card p {
  font-size: 14px;
  color: #6b7280;
  flex-grow: 1; /* 讓描述文字填滿剩餘空間，使卡片等高 */
  margin: 0 0 16px;
}

/* 開發中卡片的樣式 */
.management-card.placeholder {
  opacity: 0.7;
  position: relative;
  overflow: hidden;
}

/* 開發中標籤的樣式 */
.dev-status-badge {
  position: absolute;
  top: 10px;
  right: -30px;
  background-color: #fbbf24; /* 黃色 */
  color: #78350f;
  padding: 4px 40px;
  font-size: 12px;
  font-weight: bold;
  transform: rotate(45deg);
  transform-origin: center;
}

/* src/styles/SystemManagement.css (在檔案底部新增) */

/* --- 【新增】系統設定頁籤的專用樣式 --- */
.settings-container {
  display: flex;
  flex-direction: column;
  gap: 32px; /* 每個設定區塊之間的間距 */
}

.settings-section {
  padding: 24px;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
}

.section-title {
  font-size: 18px;
  font-weight: 600;
  color: #1f2937;
  margin: 0 0 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e5e7eb;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
}

.switch-group label {
  font-weight: 500;
}

.switch-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
}
.switch-wrapper span {
  font-size: 13px;
  color: #6b7280;
}

/* 美化的 CSS 開關樣式 */
.switch {
  position: relative;
  width: 44px;
  height: 24px;
  -webkit-appearance: none;
  appearance: none;
  background: #e5e7eb;
  border-radius: 20px;
  cursor: pointer;
  transition: background-color 0.3s;
}
.switch::before {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  transition: left 0.3s;
}
.switch:checked {
  background: #3b82f6;
}
.switch:checked::before {
  left: 22px;
}

.slider-group label {
  display: block;
  margin-bottom: 8px;
}
.slider-group input[type="range"] {
  width: 100%;
}

.data-usage-placeholder {
    margin-top: 16px;
    padding: 12px;
    background-color: #f9fafb;
    border-radius: 8px;
    font-size: 14px;
}

.dev-note {
    font-size: 14px;
    color: #fbbf24;
    background-color: #fffbeb;
    padding: 8px;
    border-radius: 6px;
    text-align: center;
}

.settings-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding-top: 24px;
  border-top: 1px solid #e5e7eb;
  margin-top: 16px;
}

/* --- 【新增】讓卡片有可點擊的視覺回饋 --- */
.management-card.clickable {
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.management-card.clickable:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 15px -3px rgb(0 0 0 / 0.1);
}  

/* src/styles/SystemManagement.css (在檔案底部新增) */

/* --- 【新增】系統日誌頁籤的專用樣式 --- */
/* 
  ==============================================================
  【第 1 步】讓「系統日誌查詢」的 Modal 變寬
  ==============================================================
  這個 :has() 選擇器會自動辨識包含日誌元件的 Modal，並將其加寬。
  :has() 瀏覽器支援度已超過 90%，可以放心使用。
*/
.modal-content:has(.logs-container) {
  width: 90vw;       /* 寬度設定為當前視窗寬度的 90% */
  max-width: 1400px; /* 但最大寬度不超過 1400px */
}


/*
  ==============================================================
  【第 2 步】針對日誌表格進行優化
  ==============================================================
  您的元件使用了 .user-table 這個 class，我們就直接針對它進行修改。
*/
.logs-container .user-table {
  width: 100%;           /* 確保表格填滿加寬後的 Modal */
  table-layout: fixed;   /* 這是關鍵！讓欄寬設定生效 */
}

/* 重新分配欄寬 */
.logs-container .user-table th:nth-child(1),
.logs-container .user-table td:nth-child(1) { width: 15%; } /* 時間 */

.logs-container .user-table th:nth-child(2),
.logs-container .user-table td:nth-child(2) { width: 10%; } /* 使用者 */

.logs-container .user-table th:nth-child(3),
.logs-container .user-table td:nth-child(3) { width: 12%; } /* 模組 */

.logs-container .user-table th:nth-child(4),
.logs-container .user-table td:nth-child(4) { width: 8%; text-align: center; } /* 等級 */

.logs-container .user-table th:nth-child(5),
.logs-container .user-table td:nth-child(5) { width: 12%; } /* 操作 */

/*
  ==============================================================
  【第 3 步】修正「詳細資訊」欄位的樣式
  ==============================================================
  這是最重要的修改，取代您原有的 .log-details 樣式。
*/
.logs-container .user-table td.log-details {
  /* 移除 max-width 和單行截斷的樣式 */
  /* max-width: 300px; (移除) */
  /* white-space: nowrap; (移除) */
  /* overflow: hidden; (移除) */
  /* text-overflow: ellipsis; (移除) */
  
  /* 【新增】允許內容自動換行 */
  white-space: normal;
  word-break: break-all; /* 對於長字串（如路徑、token）強制換行 */
  
  /* 可選：增加垂直對齊方式，讓多行文字從頂部開始 */
  vertical-align: top;
  line-height: 1.5; /* 增加行高，提升可讀性 */
}


/* 
  ==============================================================
  保留並優化您原有的其他樣式
  ==============================================================
*/
.logs-container {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.filter-toolbar {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 20px;
  background-color: #f9fafb;
  border-radius: 8px;
}

.search-bar {
  position: relative;
}
.search-bar svg {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #9ca3af;
}
.search-bar input {
  width: 100%;
  padding: 10px 10px 10px 36px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

.filter-options {
  display: flex;
  flex-wrap: wrap; 
  gap: 12px;
  align-items: center;
}
.filter-options select,
.filter-options input {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background-color: white; /* 確保背景色是白色 */
}

/* 將等級標籤置中 */
.logs-container .user-table td:has(.log-level-tag) {
  text-align: center;
}

.log-level-tag {
  display: inline-block; /* 讓標籤可以置中 */
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  color: white;
}
.log-level-tag.level-info {
  background-color: #3b82f6; /* 藍色 */
}
.log-level-tag.level-warning {
  background-color: #f97316; /* 橘色 */
}
.log-level-tag.level-error {
  background-color: #ef4444; /* 紅色 */
}

.log-time {
  font-family: monospace;
  font-size: 13px;
  color: #4b5563; /* 調整顏色，讓介面更有層次感 */
}

/* src/styles/SystemManagement.css (在底部新增) */

/* --- 效能監控專屬樣式 --- */
.performance-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}
.performance-item {
  display: flex;
  align-items: center;
  gap: 12px;
}
.performance-item .item-label {
  width: 100px;
  flex-shrink: 0;
  font-size: 14px;
}
.progress-bar {
  flex-grow: 1;
  height: 12px;
  background-color: #e5e7eb;
  border-radius: 6px;
  overflow: hidden;
}
.progress-bar div {
  height: 100%;
  border-radius: 6px;
}
.progress-bar.green div { background-color: #22c55e; }
.progress-bar.yellow div { background-color: #f59e0b; }
.progress-bar.red div { background-color: #ef4444; }

.performance-item .item-value {
  font-weight: 600;
  width: 60px;
  text-align: right;
}

/* --- 資料庫管理專屬樣式 --- */
.db-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
}
.stat-item {
  background-color: #f9fafb;
  padding: 16px;
  border-radius: 8px;
}
.stat-item span {
  display: block;
  font-size: 13px;
  color: #6b7280;
}
.stat-item strong {
  font-size: 20px;
  font-weight: 600;
}

/* --- 系統整合專屬樣式 --- */
.integration-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.integration-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
}
.integration-item span {
  flex-grow: 1;
  font-weight: 500;
}